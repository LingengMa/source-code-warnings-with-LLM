[
  {
    "project": "ffmpeg-6.1.1",
    "file": "libavcodec/motion_est_template.c",
    "line": 785,
    "status": "success",
    "function_name": "var_diamond_search",
    "function_start_line": 771,
    "function_end_line": 830,
    "slice_lines": [
      771,
      775,
      778,
      779,
      780,
      785,
      787,
      788,
      790,
      791,
      792,
      796,
      799,
      800,
      801,
      805,
      808,
      809,
      810,
      814,
      817,
      818,
      819,
      823,
      826,
      827,
      829
    ],
    "enhanced_slice_lines": [
      771,
      772,
      773,
      774,
      775,
      778,
      779,
      780,
      785,
      787,
      788,
      790,
      791,
      792,
      796,
      797,
      799,
      800,
      801,
      805,
      806,
      808,
      809,
      810,
      814,
      815,
      817,
      818,
      819,
      823,
      824,
      826,
      827,
      828,
      829
    ],
    "sliced_code": "static int var_diamond_search(MpegEncContext * s, int *best, int dmin,\n                                       int src_index, int ref_index, const int penalty_factor,\n                                       int size, int h, int flags)\n{\n    MotionEstContext * const c= &s->me;\n    LOAD_COMMON\n    LOAD_COMMON2\n    unsigned map_generation = c->map_generation;\n    for(dia_size=1; dia_size<=c->dia_size; dia_size++){\n        const int x= best[0];\n        const int y= best[1];\n        start= FFMAX(0, y + dia_size - ymax);\n        end  = FFMIN(dia_size, xmax - x + 1);\n        for(dir= start; dir<end; dir++){\n            CHECK_MV(x + dir           , y + dia_size - dir);\n        }\n        start= FFMAX(0, x + dia_size - xmax);\n        end  = FFMIN(dia_size, y - ymin + 1);\n        for(dir= start; dir<end; dir++){\n            CHECK_MV(x + dia_size - dir, y - dir           );\n        }\n        start= FFMAX(0, -y + dia_size + ymin );\n        end  = FFMIN(dia_size, x - xmin + 1);\n        for(dir= start; dir<end; dir++){\n            CHECK_MV(x - dir           , y - dia_size + dir);\n        }\n        start= FFMAX(0, -x + dia_size + xmin );\n        end  = FFMIN(dia_size, ymax - y + 1);\n        for(dir= start; dir<end; dir++){\n            CHECK_MV(x - dia_size + dir, y + dir           );\n        }\n        if(x!=best[0] || y!=best[1])\n            dia_size=0;\n    }\n    return dmin;\n",
    "sliced_code_with_placeholder": "    /* PLACEHOLDER: Code omitted for brevity */\nstatic int var_diamond_search(MpegEncContext * s, int *best, int dmin,\n                                       int src_index, int ref_index, const int penalty_factor,\n                                       int size, int h, int flags)\n{\n    MotionEstContext * const c= &s->me;\n    /* PLACEHOLDER: Code omitted for brevity */\n    LOAD_COMMON\n    LOAD_COMMON2\n    unsigned map_generation = c->map_generation;\n    /* PLACEHOLDER: Code omitted for brevity */\n    for(dia_size=1; dia_size<=c->dia_size; dia_size++){\n    /* PLACEHOLDER: Code omitted for brevity */\n        const int x= best[0];\n        const int y= best[1];\n        start= FFMAX(0, y + dia_size - ymax);\n        end  = FFMIN(dia_size, xmax - x + 1);\n        for(dir= start; dir<end; dir++){\n    /* PLACEHOLDER: Code omitted for brevity */\n            CHECK_MV(x + dir           , y + dia_size - dir);\n        }\n        start= FFMAX(0, x + dia_size - xmax);\n        end  = FFMIN(dia_size, y - ymin + 1);\n        for(dir= start; dir<end; dir++){\n    /* PLACEHOLDER: Code omitted for brevity */\n            CHECK_MV(x + dia_size - dir, y - dir           );\n        }\n        start= FFMAX(0, -y + dia_size + ymin );\n        end  = FFMIN(dia_size, x - xmin + 1);\n        for(dir= start; dir<end; dir++){\n    /* PLACEHOLDER: Code omitted for brevity */\n            CHECK_MV(x - dir           , y - dia_size + dir);\n        }\n        start= FFMAX(0, -x + dia_size + xmin );\n        end  = FFMIN(dia_size, ymax - y + 1);\n        for(dir= start; dir<end; dir++){\n    /* PLACEHOLDER: Code omitted for brevity */\n            CHECK_MV(x - dia_size + dir, y + dir           );\n        }\n        if(x!=best[0] || y!=best[1])\n            dia_size=0;\n    }\n    return dmin;\n",
    "metadata": {
      "function_name": "var_diamond_search",
      "function_start_line": 771,
      "function_end_line": 830,
      "target_line": 785,
      "backward_nodes": 80,
      "forward_nodes": 323,
      "total_slice_nodes": 403,
      "total_slice_lines": 27,
      "slice_density": 0.45,
      "original_slice_lines": 27,
      "enhanced_slice_lines": 35,
      "final_node_count": 403,
      "ast_enhanced": true
    }
  }
]